<div id="<%= dom_id product %>" class="bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden max-w-4xl mx-auto" data-aos="fade-up">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Product Image -->
    <div class="lg:h-96 h-64 bg-gradient-to-br from-primary-100 to-indigo-100 flex items-center justify-center overflow-hidden">
      <% if product.product_image.attached? %>
        <%= image_tag product.product_image, alt: product.productName, class: "w-full h-full object-cover" %>
      <% elsif product.image.present? %>
        <%= image_tag product.image, alt: product.productName, class: "w-full h-full object-cover" %>
      <% else %>
        <div class="text-center">
          <svg class="w-20 h-20 text-primary-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
          </svg>
          <p class="text-primary-500 text-lg">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
        </div>
      <% end %>
    </div>

    <!-- Product Details -->
    <div class="p-8">
      <div class="mb-6">
        <h1 class="text-3xl font-bold text-gray-900 mb-2"><%= product.productName %></h1>
        <p class="text-lg text-gray-600">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: #<%= product.productCode %></p>
      </div>

      <div class="mb-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-3">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
        <p class="text-gray-700 leading-relaxed"><%= product.productDetail %></p>
      </div>

      <div class="mb-8">
        <div class="flex items-center justify-between">
          <span class="text-3xl font-bold text-primary-600">
            ‡∏ø<%= number_with_delimiter(product.productPrice) %>
          </span>
          <span class="text-sm text-green-600 bg-green-100 px-3 py-1 rounded-full">‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢</span>
        </div>
      </div>

      <!-- Owner Info -->
      <div class="mb-6 p-4 bg-gray-50 rounded-xl">
        <h4 class="text-sm font-semibold text-gray-700 mb-2">‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢</h4>
        <div class="flex items-center">
          <% if product.user.present? %>
            <div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3">
              <span class="text-primary-600 font-semibold text-sm">
                <%= product.user.name.present? ? product.user.name.first.upcase : "U" %>
              </span>
            </div>
            <span class="text-gray-700 font-medium">
              <%= product.user.name.present? ? product.user.name : "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠" %>
            </span>
          <% else %>
            <span class="text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢</span>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript Challenge ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì! -->
<script>
  // üéØ Challenge 1: Image Zoom on Click
  // TODO: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ã‡∏π‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å
  //
  // ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á:
  // 1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å element ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
  // 2. ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener 'click'
  // 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á modal/overlay ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà
  // 4. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î modal

  function initImageZoom() {
    console.log('üñºÔ∏è Image zoom feature - Ready to implement!');

    const productImage = document.querySelector('#<%= dom_id product %> img');
    if (!productImage) return;
    
    productImage.style.cursor = 'pointer';
    productImage.title = '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà';
    
    productImage.addEventListener('click', function() {
      // ‡∏™‡∏£‡πâ‡∏≤‡∏á modal container
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4';
      modal.id = "zoom-modal";

      // ‡∏™‡∏£‡πâ‡∏≤‡∏á content container
      const modalContent = document.createElement('div');
      modalContent.className = 'relative max-w-6xl max-h-full flex flex-col';
      
      // ‡πÄ‡∏û‡∏¥‡πà‡∏° header ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
      const header = document.createElement('div');
      header.className = 'text-white p-4 text-center';
      header.innerHTML = `
        <h3 class="text-xl font-bold mb-2"><%= product.productName %></h3>
        <p class="text-gray-300">‡∏£‡∏´‡∏±‡∏™: #<%= product.productCode %> | ‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ø<%= number_with_delimiter(product.productPrice) %></p>
      `;
      
      // ‡∏™‡∏£‡πâ‡∏≤‡∏á image ‡πÉ‡∏ô modal
      const zoomedImage = document.createElement('img');
      zoomedImage.src = productImage.src;
      zoomedImage.className = 'max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl';
      zoomedImage.alt = '<%= product.productName %>';

      // ‡πÄ‡∏û‡∏¥‡πà‡∏° close button
      const closeButton = document.createElement('button');
      closeButton.className = 'absolute top-4 right-4 text-white hover:text-red-400 text-3xl font-bold z-10 transition-colors';
      closeButton.innerHTML = '√ó';
      closeButton.onclick = () => {
        modal.remove();
      };
      
      modalContent.appendChild(header);
      modalContent.appendChild(zoomedImage);
      modal.appendChild(modalContent);
      modal.appendChild(closeButton);
      document.body.appendChild(modal);

      // ‡∏õ‡∏¥‡∏î modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
      modal.addEventListener('click', function(event) {
        if (event.target === modal) {
          modal.remove();
        }
      });
      
      // ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î ESC 
      function handleEscapeKey(e) {
        if (e.key === 'Escape') {
          modal.remove();
          document.removeEventListener('keydown', handleEscapeKey);
        }
      }
    
      document.addEventListener('keydown', handleEscapeKey);
    });
  }

  // Initialize ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
  document.addEventListener('DOMContentLoaded', function() {
    initImageZoom();
  });
</script>