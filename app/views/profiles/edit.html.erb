<%# app/views/profiles/edit.html.erb %>
<div class="max-w-xl mx-auto mt-10 bg-white rounded-lg shadow-lg p-8">
  <h1 class="text-2xl font-bold text-primary-700 mb-6 text-center">แก้ไขโปรไฟล์</h1>

  <%= form_with model: @user, url: profile_path, method: :patch, local: true do |f| %>
    <% if @user.errors.any? %>
      <div class="mb-4 p-4 bg-red-100 border border-red-300 rounded text-red-700">
        <strong>พบข้อผิดพลาด:</strong>
        <ul class="list-disc ml-6">
          <% @user.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-4">
      <%= f.label :name, "ชื่อ-นามสกุล", class: "block font-medium mb-1" %>
      <%= f.text_field :name, class: "w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-400" %>
    </div>

    <div class="mb-4">
      <%= f.label :bank_account_number, "เลขบัญชีธนาคาร", class: "block font-medium mb-1" %>
      <%= f.text_field :bank_account_number, class: "w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-400" %>
    </div>

    <div class="mb-4">
      <%= f.label :bank_account_name, "ชื่อบัญชีธนาคาร", class: "block font-medium mb-1" %>
      <%= f.text_field :bank_account_name, class: "w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-400" %>
    </div>

    <div class="mb-6">
      <%= f.label :bank_code, "เลือกธนาคาร", class: "block font-medium mb-1" %>
      <%= f.select :bank_code, User::BANK_CODES.map { |short, code| [short, code] }, { prompt: "เลือกธนาคาร" }, class: "w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-400" %>
    </div>

    <div class="flex justify-center">
      <%= f.submit "บันทึกข้อมูล", class: "bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-6 rounded shadow transition-colors duration-200" %>
    </div>
  <% end %>
</div>
